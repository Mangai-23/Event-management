<!DOCTYPE html>
<html>
<head>
  <title>Registration Form</title>
  <style>
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <h2>Registration Form</h2>
  <form id="registrationForm">
    <div>
      <label for="name">Name:</label>
      <input type="text" id="name" required>
      <span class="error" id="nameError"></span>
    </div>
    <div>
      <label for="event">Event Selection:</label>
      <input type="checkbox" id="event1" name="events[]" value="Event 1">
      <label for="event1">Event 1</label>
      <input type="checkbox" id="event2" name="events[]" value="Event 2">
      <label for="event2">Event 2</label>
      <input type="checkbox" id="event3" name="events[]" value="Event 3">
      <label for="event3">Event 3</label>
      <span class="error" id="eventError"></span>
    </div>
    <div>
      <label for="gender">Gender:</label>
      <select id="gender" required>
        <option value="" disabled selected>Select Gender</option>
        <option value="male">Male</option>
        <option value="female">Female</option>
        <option value="other">Other</option>
      </select>
      <span class="error" id="genderError"></span>
    </div>
    <div>
      <label for="email">Email:</label>
      <input type="email" id="email" required>
      <span class="error" id="emailError"></span>
    </div>
    <div>
      <label for="address">Address:</label>
      <textarea id="address" required></textarea>
      <span class="error" id="addressError"></span>
    </div>
    <div>
      <label for="country">Country:</label>
      <select id="country" required>
        <option value="" disabled selected>Select Country</option>
        <option value="usa">USA</option>
        <option value="canada">Canada</option>
        <option value="uk">UK</option>
      </select>
      <span class="error" id="countryError"></span>
    </div>
    <div>
      <label for="state">State:</label>
      <select id="state" required>
        <option value="" disabled selected>Select State</option>
      </select>
      <span class="error" id="stateError"></span>
    </div>
    <div>
      <label for="phone">Phone Number:</label>
      <input type="text" id="phone" required>
      <span class="error" id="phoneError"></span>
    </div>
    <button type="submit">Register</button>
  </form>

  <script>
    // Function to validate the form
    function validateForm(event) {
      event.preventDefault();

      // Reset error messages
      resetErrors();

      // Validate Name
      var nameInput = document.getElementById('name');
      if (nameInput.value === '') {
        displayError('nameError', 'Please enter your name.');
        return;
      }

      // Validate Event Selection
      var events = document.getElementsByName('events[]');
      var isChecked = false;
      for (var i = 0; i < events.length; i++) {
        if (events[i].checked) {
          isChecked = true;
          break;
        }
      }
      if (!isChecked) {
        displayError('eventError', 'Please select at least one event.');
        return;
      }

      // Validate Gender
      var genderSelect = document.getElementById('gender');
      if (genderSelect.value === '') {
        displayError('genderError', 'Please select your gender.');
        return;
      }

      // Validate Email
      var emailInput = document.getElementById('email');
      var emailRegex = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
      if (!emailRegex.test(emailInput.value)) {
        displayError('emailError', 'Please enter a valid email address.');
        return;
      }

      // Validate Address
      var addressInput = document.getElementById('address');
      if (addressInput.value === '') {
        displayError('addressError', 'Please enter your address.');
        return;
      }

      // Validate Country
      var countrySelect = document.getElementById('country');
      if (countrySelect.value === '') {
        displayError('countryError', 'Please select your country.');
        return;
      }

      // Validate State
      var stateSelect = document.getElementById('state');
      if (stateSelect.value === '') {
        displayError('stateError', 'Please select your state.');
        return;
      }

      // Validate Phone Number
      var phoneInput = document.getElementById('phone');
      var phoneRegex = /^\d{10}$/;
      if (!phoneRegex.test(phoneInput.value)) {
        displayError('phoneError', 'Please enter a valid 10-digit phone number.');
        return;
      }

      // Form is valid, submit it or perform further actions
      // Here, we'll just display an alert
      alert('Registration successful!');
    }

    // Function to display an error message
    function displayError(elementId, message) {
      var errorElement = document.getElementById(elementId);
      errorElement.innerText = message;
    }

    // Function to reset error messages
    function resetErrors() {
      var errorElements = document.getElementsByClassName('error');
      for (var i = 0; i < errorElements.length; i++) {
        errorElements[i].innerText = '';
      }
    }

    // Populate states based on selected country
    function populateStates() {
      var countrySelect = document.getElementById('country');
      var stateSelect = document.getElementById('state');
      stateSelect.innerHTML = '';

      if (countrySelect.value === 'usa') {
        var usaStates = ['New York', 'California', 'Texas'];
        for (var i = 0; i < usaStates.length; i++) {
          var option = document.createElement('option');
          option.value = usaStates[i];
          option.text = usaStates[i];
          stateSelect.appendChild(option);
        }
      } else if (countrySelect.value === 'canada') {
        var canadaStates = ['Ontario', 'Quebec', 'British Columbia'];
        for (var i = 0; i < canadaStates.length; i++) {
          var option = document.createElement('option');
          option.value = canadaStates[i];
          option.text = canadaStates[i];
          stateSelect.appendChild(option);
        }
      } else if (countrySelect.value === 'uk') {
        var ukStates = ['England', 'Scotland', 'Wales'];
        for (var i = 0; i < ukStates.length; i++) {
          var option = document.createElement('option');
          option.value = ukStates[i];
          option.text = ukStates[i];
          stateSelect.appendChild(option);
        }
      }
    }

    // Add event listeners for form submission and country change
    document.getElementById('registrationForm').addEventListener('submit', validateForm);
    document.getElementById('country').addEventListener('change', populateStates);
  </script>
</body>
</html>
